<!-- <div class="container-fluid">
    <div class="row">
        <div class="col-4">
            <p>Recent User</p>
            <div class="card">
                <div class="inbox_people">
                    <div class="card-header">
                        <div class="headind_srch">
                            <p>Search</p>
                            <div class="srch_bar">
                                <div class="stylish-input-group">
                                    <div class="ng-autocomplete">
                                        <ng-autocomplete [data]="allUserArray" [searchKeyword]="keyword"
                                            (selected)='selectEvent($event)' (inputChanged)='onChangeSearch($event)'
                                            (inputFocused)='onFocused($event)' [itemTemplate]="itemTemplate"
                                            [notFoundTemplate]="notFoundTemplate">
                                        </ng-autocomplete>
                                        <ng-template #itemTemplate let-item>
                                            <a [innerHTML]="item.emailId"></a>
                                        </ng-template>
                                        <ng-template #notFoundTemplate let-notFound>
                                            <div [innerHTML]="notFound"></div>
                                        </ng-template>
                                    </div>
                                     <input type="text" class="search-bar" placeholder="Search"> 
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="inbox_chat">
                            <div *ngFor="let users of allUserArray; let i=index">
                                <hr *ngIf="i>0">
                                <div class="chat_list" (click)="selectUser(users)">
                                    <div class="chat_people" *ngIf="users.isLoggedIn == true ; else deactiveUser">
                                        <div class="chat_img">

                                            <img class="rounded-circle" style="width: 50px; height: 40px;"
                                                src="../../../assets/images/akhshay.png" alt="sunil">
                                            <span class="greendot"></span>
                                        </div>
                                        <div class="chat_ib">
                                            <h5>{{users.emailId}}</h5>
                                            <span class="time_date"> {{users.creationdate | date:'shortTime'}}</span>
                                        </div>
                                    </div>

                                    <ng-template #deactiveUser>
                                        <div class="chat_img">

                                            <img class="rounded-circle" style="width: 50px; height: 40px;"
                                                src="../../../assets/images/akhshay.png" alt="sunil">
                                            <span class="reddot"></span>
                                        </div>
                                        <div class="chat_ib">
                                            <h5>{{users.emailId}}</h5>
                                            <span class="time_date"> {{users.creationdate | date:'shortTime'}}</span>
                                        </div>
                                    </ng-template>
                                </div>
                                 <br>
                                <br> 
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div *ngIf="userSelected" class="col-8">
            <p>Message History</p>
            <div class="card">
                <div class="card-header">
                    <div class="current_user">
                        <div class="input_msg_write">
                            <div class="chat_people">
                                 <div class="chat_img">
                                    <img class="rounded-circle" style="width: 40px; height: 40px;"
                                        src="../../../assets/images/akhshay.png" alt="sunil">
                                </div> 
                                <div class="current_user_detail">
                                    <p>{{userSelected}}
                                        <i class="fa fa-ellipsis-v video-audio-right" data-toggle="modal"
                                            data-target="#myModalmenu" (click)="menuDropdown()" aria-hidden="true"></i>
                                        <i class="fa fa-video-camera video-audio-right" data-toggle="modal"
                                            data-target="#myModalvideo" aria-hidden="true" (click)="chatVideo()"></i>
                                        <i class="fa fa-phone video-audio-right" data-toggle="modal"
                                            data-target="#myModalaudio" (click)="audioCall()" aria-hidden="true"></i>
                                    </p>

                                     <div *ngFor="let users of allusers"> 
                                    <div *ngIf="activeStatus == true; else offline">
                                        <small class="greentext">Online</small>
                                    </div>
                                    <ng-template #offline>
                                        <small class="redtext">Offline</small>
                                    </ng-template>

                                     </div> 
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card-body">
                    <div class="mesgs">
                        <div id="msg_history">
                            <div *ngFor="let msgs of newMessageObject; let i=index">
                                <div *ngIf="msgs.user == 'sender' &&  msgs.receiver == userSelected; else receiverUser">
                                    <div class="outgoing_msg">
                                        <div class="outgoing_msg_img">
                                            <img style="width: 30px; height: 30px;" class="rounded-circle"
                                                src="../../../assets/images/jothipawar.jpg" alt="sunil">
                                        </div>
                                        <div class="sent_msg bubble-blue you">
                                            <p>{{msgs.senderMsg}}</p>
                                            <p>{{msgs.receiverMsg}} </p>
                                        </div>
                                    </div>
                                </div>

                                <ng-template #receiverUser>
                                    <div class="incoming_msg" *ngIf="msgs.sender == userSelected">
                                        <div class="incoming_msg_img">
                                            <img style="width: 30px; height: 30px;" class="rounded-circle"
                                                src="../../../assets/images/akhshay.png" alt="sunil">
                                        </div>
                                        <div class="received_msg">
                                            <div class="received_withd_msg bubble me">
                                                <p>{{msgs.receiverMsg}} </p>
                                                <p>{{msgs.senderMsg}}</p>
                                            </div>
                                        </div>
                                    </div>
                                </ng-template>
                            </div>
                             </div> 
                            <div *ngIf="videoEnable">
                                 The Modal 
                                <div class="modal" id="myModalvideo">
                                    <div class="modal-dialog">
                                        <div class="modal-content">

                                             Modal Header 
                                             <div class="modal-header">
                                                <h6 class="modal-title">Video Call Record</h6>
                                                <button type="button" class="close"
                                                    data-dismiss="modal">&times;</button>
                                            </div> 

                                             Modal body 
                                            <div class="modal-body">
                                                <div class="row">
                                                    <div class="container">
                                                        <div class="card">
                                                            <div class="card-body">
                                                                <div class="row">
                                                                    <div class="col-md-6 text-center">
                                                                        <video #videoElement class="img-border"
                                                                            width="{{ videoWidth }}"
                                                                            height="{{ videoHeight }}">
                                                                            <source>
                                                                        </video>
                                                                    </div>
                                                                    <div class="col-md-6 text-center">
                                                                        <video #remoteVideoElement class="img-border"
                                                                            width="{{ videoWidth }}"
                                                                            height="{{ videoHeight }}">
                                                                            <source>
                                                                        </video>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                 <video id="myVideo" playsinline width="500" height="500"
                                                    class="video-js vjs-default-skin"></video>

                                                    <div class="bottom-container">
                                                        <div id="photos"></div>
                                                    </div> 
                                            </div>



                                             Modal footer 
                                             <div class="modal-footer">
                                                <button type="button" class="btn btn-primary" id="imageSnap"
                                                    data-dismiss="modal" (click)="imageSnapshot()">Snapshot</button>
                                                <button type="button" class="btn btn-primary" data-dismiss="modal"
                                                    (click)="videoRecoder()">Record</button>
                                                <button type="button" class="btn btn-danger"
                                                    data-dismiss="modal">Close</button>
                                                <canvas id="canvas"></canvas>
                                            </div> 

                                        </div>
                                    </div>
                                </div>
                                End The Modal 
                            </div>
                        </div>
                        <div class="type_msg">
                        <div class="row">
                           
                            <div class="col-md-9">
                                        <div class="input_msg_write">    
                                            <input type="text" (keydown.enter)="sendMessageChat($event.target.value)"
                                                (keydown.enter)="titleInput.value=''" #titleInput class="write_msg"
                                                placeholder="Type a message"/>
                                                     
                                        </div>
                                </div>
                                <div class="col-md-3">
                                        <button class="file_send_btn"><i class="fa fa-paperclip" aria-hidden="true" (click)="enableFile()"></i></button>
                                        <button class="file_send_btn"><i class="fa fa-microphone" aria-hidden="true" (click)="enableAudio()"></i></button>
                                        <button class="file_send_btn" type="button" (click)="sendMessageChat(titleInput.value)" (click)="titleInput.value=''"><i class="fa fa-paper-plane-o" aria-hidden="true"></i></button> 
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row" *ngIf="fileEnable">
            <div class="container">
              <div class="card">
                <div class="card-body">
                  <div class="container btn-toolbar">
                    <div class="custom-file input-group flex-nowrap col-md-10">
                      <input type="file" class="custom-file-input" id="file" (change)="handleFileInput($event.target.files)" >
                      <label class="custom-file-label" for="file">{{ sendFileName }}</label>
                    </div>
                    <div class="btn-group col-md-2">
                      <button type="button" class="btn btn-warning" (click)="sendFile()" >
                        <i class="fa fa-paper-plane-o" aria-hidden="true"></i> Send
                      </button>
                    </div>
                  </div>
                  <br />
                  <div class="container">
                    <div class="row">
                      <div class="col-md-2 text-center">
                        Send Progress :
                      </div>
                      <div class="col-md-10">
                        <div class="progress">
                          <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" [style.width.%]="sendProgressValue" aria-valuenow="progressValue" aria-valuemin="sendProgressMin" aria-valuemax="sendProgressMax">
                            <strong> {{ sendProgressValue }} %</strong>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <br />
                  <div class="row">
                    <div class="col-md-2 text-left">
                      Received :
                    </div>
                  </div>
                  <div class="container">
                    <div class="row">
                      <div class="col-md-2 text-right">
                        File Name :
                      </div>
                      <div class="col-md-10">
                        {{ receivedFileName }}
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-2 text-right">
                        File Type :
                      </div>
                      <div class="col-md-10">
                        {{ receivedFileType }}
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-2 text-right">
                        File Size :
                      </div>
                      <div class="col-md-10">
                        {{ receivedFileSize }}
                      </div>
                    </div>
                  </div>
                  <div class="container">
                    <div class="row">
                      <div class="col-md-2 text-center">
                        Receive Progress :
                      </div>
                      <div class="col-md-10">
                        <div class="progress">
                          <div class="progress-bar bg-success progress-bar-striped progress-bar-animated" role="progressbar" [style.width.%]="receivedProgressValue" aria-valuenow="receivedProgressValue" aria-valuemin="receivedProgressMin" aria-valuemax="receivedProgressMax">
                            <strong> {{ receivedProgressValue }} %</strong>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="container">
                    <div class="text-center">
                      <button type="button" class="btn btn-primary" (click)="downloadFile()" [disabled]="!enableDownload">
                        <i class="fa fa-download" aria-hidden="true"></i> Download File
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
</div>  -->












<div class="container-fluid">
  <div class="row">
    <div class="col-md-3">
      <div class="card">
        <div class="card-header">
          <p>Recent User</p>
        </div>
        <div class="card-body">
          <!-- <div class="chat_users"> -->
          <div *ngFor="let users of allUsersArr; let i=index">
            <hr *ngIf="i>0">
            <div class="chat_list" (click)="selectedUser(users)">
              <div class="chat_people" *ngIf="users.isLoggedIn == true ; else deactiveUser">
                <div class="row">
                  <div class="col-md-4">
                    <div class="chat_img">
                      <img class="rounded-circle" style="width: 50px; height: 40px;"
                        src="../../../assets/images/akhshay.png" alt="sunil">
                      <span class="greendot"></span>
                    </div>
                  </div>
                  <div class="col-md-8">
                    <div class="chat_ib">
                      <h6>{{users.emailId}}</h6>
                      <span class="time_date"> {{users.creationdate | date:'shortTime'}}</span>
                    </div>
                  </div>
                </div>
              </div>

              <ng-template #deactiveUser>
                <div class="row">
                  <div class="col-md-4">
                    <div class="chat_img">
                      <img class="rounded-circle" style="width: 50px; height: 40px;"
                        src="../../../assets/images/akhshay.png" alt="sunil">
                      <span class="reddot"></span>
                    </div>
                  </div>
                  <div class="col-md-8">
                    <div class="chat_ib">
                      <h6>{{users.emailId}}</h6>
                      <span class="time_date"> {{users.creationdate | date:'shortTime'}}</span>
                    </div>
                  </div>
                </div>
              </ng-template>
            </div>
          </div>

          <!-- </div> -->
        </div>
      </div>
    </div>
    <div class="col-md-9">
      <div class="row">
        <div class="card">
          <div class="card-body">
            <div class="row">
              <div class="col-md-9">
                <strong>{{ userSelected }}</strong> 
                {{ selectedUserClientID }}
                <!-- : {{ clientId }} -->
              </div>
              <div class="col-md-3">
                <i class="fa fa-envelope icon-send" aria-hidden="true" (click)="enableText()"></i>
                <i class="fa fa-files-o icon-send" aria-hidden="true" (click)="enableFile()"></i>
                <i class="fa fa-volume-up icon-send" aria-hidden="true" (click)="enableAudio()"></i>
                <i class="fa fa-video-camera icon-send" aria-hidden="true" (click)="enableVideo()"></i>
                <i class="fa fa-window-restore icon-send" aria-hidden="true" (click)="enableScreen()"></i>
              </div>
            </div>
            <!-- <div class="clientid">
              <div class="btn-toolbar">
                <div class="input-group flex-nowrap col-md-9">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="addon-wrapping"> Client ID </span>
                  </div>
                  <input type="text" class="form-control" placeholder="Enter Client Id To Connect..."
                    aria-label="toClientId" aria-describedby="addon-wrapping" [(ngModel)]="toClientId"
                    [disabled]="connected">
                </div>
                <div class="btn-group col-md-3">
                  <button *ngIf="!connected" type="button" class="btn btn-success" (click)="connect()">
                    <i class="fa fa-compress" aria-hidden="true"></i> Connect
                  </button>
                  <button *ngIf="connected" type="button" class="btn btn-danger" (click)="disconnect()">
                    <i class="fa fa-expand" aria-hidden="true"></i> Disconnect
                  </button>
                </div>
              </div>
            </div> -->
          </div>
        </div>
      </div>
      <!-- <div class="row"> -->
      <div class="row" *ngIf="textEnable">
        <!-- <div class="container"> -->
        <div class="card">
          <!-- <div class="card-body">
            <div class="inbox_chat">
              <div *ngFor="let message of messages">
                <strong>Client-{{ message['clientId'] }} : </strong> {{ message['data'] }}
              </div>
            </div>
            <br />
            <div class="btn-toolbar">
              <div class="input-group flex-nowrap col-md-10">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="addon-wrapping"> Message </span>
                </div>
                <input type="text" class="form-control" #titleInput (keydown.enter)="sendMessageChat($event.target.value)" placeholder="Enter Message To Send..." aria-label="message"
                  aria-describedby="addon-wrapping" [(ngModel)]="message" [disabled]="!connected">
              </div>
              <div class="btn-group col-md-2">
                <button type="button" class="btn btn-primary" (click)="sendMessageChat(titleInput.value)" [disabled]="!connected">
                  <i class="fa fa-paper-plane-o" aria-hidden="true"></i> Send
                </button>
              </div>
            </div>
          </div> -->

          <div class="card-body">
            <div class="inbox_chat">
              <!-- <div class="card">
                <div class="card-body"> -->
                  <div *ngFor="let message of messages">
                    <strong>Client-{{ message['clientId'] }} : </strong> {{ message['data'] }}
                  </div>
                <!-- </div>
              </div> -->
            </div>
            <br />
            <div class="btn-toolbar">
              <div class="input-group flex-nowrap col-md-10">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="addon-wrapping"> Message </span>
                </div>
                <input type="text" class="form-control" placeholder="Enter Message To Send..." aria-label="message" aria-describedby="addon-wrapping" [(ngModel)]="message" [disabled]="!connected">
              </div>
              <div class="btn-group col-md-2">
                <button type="button" class="btn btn-primary" (click)="sendMessage()" [disabled]="!connected">
                  <i class="fa fa-paper-plane-o" aria-hidden="true"></i> Send
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row" *ngIf="fileEnable">
        <div class="container">
          <div class="card">
            <div class="card-body">
              <div class="container btn-toolbar">
                <div class="custom-file input-group flex-nowrap col-md-10">
                  <input type="file" class="custom-file-input" id="file" (change)="handleFileInput($event.target.files)"
                    [disabled]="!connected">
                  <label class="custom-file-label" for="file">{{ sendFileName }}</label>
                </div>
                <div class="btn-group col-md-2">
                  <button type="button" class="btn btn-warning" (click)="sendFile()"
                    [disabled]="sendFileName == 'Choose file' || !connected">
                    <i class="fa fa-paper-plane-o" aria-hidden="true"></i> Send
                  </button>
                </div>
              </div>
              <br />
              <div class="container">
                <div class="row">
                  <div class="col-md-2 text-center">
                    Send Progress :
                  </div>
                  <div class="col-md-10">
                    <div class="progress">
                      <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                        [style.width.%]="sendProgressValue" aria-valuenow="progressValue"
                        aria-valuemin="sendProgressMin" aria-valuemax="sendProgressMax">
                        <strong> {{ sendProgressValue }} %</strong>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <br />
              <div class="row">
                <div class="col-md-2 text-left">
                  Received :
                </div>
              </div>
              <div class="container">
                <div class="row">
                  <div class="col-md-2 text-right">
                    File Name :
                  </div>
                  <div class="col-md-10">
                    {{ receivedFileName }}
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-2 text-right">
                    File Type :
                  </div>
                  <div class="col-md-10">
                    {{ receivedFileType }}
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-2 text-right">
                    File Size :
                  </div>
                  <div class="col-md-10">
                    {{ receivedFileSize }}
                  </div>
                </div>
              </div>
              <div class="container">
                <div class="row">
                  <div class="col-md-2 text-center">
                    Receive Progress :
                  </div>
                  <div class="col-md-10">
                    <div class="progress">
                      <div class="progress-bar bg-success progress-bar-striped progress-bar-animated" role="progressbar"
                        [style.width.%]="receivedProgressValue" aria-valuenow="receivedProgressValue"
                        aria-valuemin="receivedProgressMin" aria-valuemax="receivedProgressMax">
                        <strong> {{ receivedProgressValue }} %</strong>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="container">
                <div class="text-center">
                  <button type="button" class="btn btn-primary" (click)="downloadFile()" [disabled]="!enableDownload">
                    <i class="fa fa-download" aria-hidden="true"></i> Download File
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row" *ngIf="audioEnable">
        <div class="container">
          <div class="card">
            <div class="card-body">
              <div class="row">
                <div class="col-md-6 text-center">
                  <audio #audioElement controls>
                    <source>
                  </audio>
                </div>
                <div class="col-md-6 text-center">
                  <audio #remoteAudioElement controls>
                    <source>
                  </audio>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row" *ngIf="videoEnable">
        <div class="container">
          <div class="card">
            <div class="card-body">
              <!-- <div class="video_chat"> -->
              <div class="row">
                <div class="internaldiv">
                  <video #videoElement class="img-border">
                    <source>
                  </video>
                </div>
                <div class="externaldiv">
                  <video #remoteVideoElement class="img-border">
                    <source>
                  </video>
                </div>
              </div>
              <!-- </div> -->
            </div>
          </div>
        </div>
      </div>
      <div class="row" *ngIf="screenEnable">
        <div class="container">
          <div class="card">
            <div class="card-body">
              <div class="row">
                <div class="col-md-6 text-center">
                  <video #screenElement class="img-border" width="{{ screenWidth }}" height="{{ screenHeight }}">
                    <source>
                  </video>
                </div>
                <div class="col-md-6 text-center">
                  <video #remoteScreenElement class="img-border" width="{{ screenWidth }}" height="{{ screenHeight }}">
                    <source>
                  </video>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div class="footer"></div>
</div>